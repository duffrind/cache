var PhotoSlider=function(a){this.slidename=a};PhotoSlider.prototype.getSlidename=function(){return this.slidename};$(function(){var a=new PhotoSlider($("#c049q_photo-slider"));a.c049q_initPhotoSlider()});$(function(){if($("#c049q_photo-slider_landscape").length){var a=new PhotoSlider($("#c049q_photo-slider_landscape"));a.c049q_initPhotoSlider()}});var galleryMoveFlg=false;PhotoSlider.prototype.c049q_initPhotoSlider=function(){var q=this.getSlidename();var g=q.find(".photo-slider-num-now");var y=q.find(".photo-slider-num-total");var v=q.find(".photo-slider-caption-title");var l=q.find(".photo-slider-caption-caption");var z=q.find(".swiper-slide__title");var s=q.find(".category");var n=q.find(".planprice");var a=q.find(".madori");var d=q.find(".landarea");var f=q.find(".buildarea");var k=q.find(".swiper-content .swiper-slide").length;g.html(1);var j=q.find(".swiper-content .notphoto").length;var b=q.find('.swiper-content .swiper-slide img[src$="nophoto.gif"]').length+q.find('.swiper-content .swiper-slide img[src$="pic_now_printing.gif"]').length+q.find('.swiper-content .swiper-slide img[src$="pic_now_printing_nolink.gif"]').length;if(b>1){b=1}y.html(k-j);$(".photo-slider-thumb").show();var w=q.find(".content-arrow-l.content-arrow");var t=q.find(".content-arrow-r.content-arrow");if(k==1&&j<1){w.hide();t.hide()}else{w.show();t.show()}q.find(".swiper-slide:not(.notphoto) a").each(function(B){var C=$(this);var D=C.attr("href");var A=new Image();A.src=D;A.onload=function(){C.attr("data-size",this.width+"x"+this.height)}});var r=false;var u=false;var m=null;var h=null;var e=q.find(".swiper-content").swiper({centeredSlides:true,visibilityFullFit:true,slidesPerView:"auto",useCSS3Transforms:false,onSlideChangeStart:function(){r=true;if(!q.find(".swiper-slide-visible.swiper-slide-active").hasClass("notphoto")){var B=q.find(".swiper-slide.active-nav.inner.swiper-slide-visible.swiper-slide-active");var D=B.find("a").attr("href");var G=B.find("a").attr("subcategory-name");var C=B.find("a").attr("caption-name");var F=navigator.userAgent;var A=$("#BUKKEN").val();var E=$("#eventLogOutput").data("shumoku");h=D;if(h!==m){m=h;eventLogOutput(D,G,C,F,A,E)}}else{m=null}if(i){c()}else{x()}},onTouchMove:function(A){u=true},onTouchEnd:function(A){if(q.find(".photo-slider-thumb #photo-slider-thumb-list").length){if(u&&!r){if(A.activeIndex==0&&A.touches.diff>0){A.swipeTo(k-1)}else{if(k==A.activeIndex+1&&A.touches.diff<0){A.swipeTo(0)}}}}r=false;u=false;if(q.find(".swiper-slide.estate").length){$("img.lazy").trigger("display")}},});if($(".photo-slider .swiper-nav")[0]){var i=true}var p=$(".photo-slider .swiper-nav").swiper({visibilityFullFit:true,slidesPerView:"auto",useCSS3Transforms:false,onSlideClick:function(){e.swipeTo(p.clickedSlideIndex)}});function c(){q.find(".swiper-nav .active-nav").removeClass("active-nav");var C=q.find(".swiper-nav .swiper-slide").eq(e.activeIndex).addClass("active-nav");if(!C.hasClass("swiper-slide-visible")){if(C.index()>p.activeIndex){var B=Math.floor(p.width/C.width())-1;p.swipeTo(C.index()-B)}else{p.swipeTo(C.index())}}var A=1;var D=C.index();if(C.hasClass("notphoto")){A=0;D=""}g.html(C.index()+A);o(D);thumbListSlide()}function x(){q.find(".swiper-slide .active-nav").removeClass("active-nav");var C=q.find(".swiper-content .swiper-slide").eq(e.activeIndex).addClass("active-nav");if(!C.hasClass("swiper-slide-visible")){if(C.index()>p.activeIndex){var B=Math.floor(p.width/C.width())-1;p.swipeTo(C.index()-B)}else{p.swipeTo(C.index())}}var A=1;var D=C.index();if(C.hasClass("notphoto")){A=0;D=""}g.html(C.index()+A);o(D);thumbListSlide()}o(0);function o(D){var G=q.find(".swiper-content .swiper-slide").eq(D).find("a");var H=$("#layoutType").val();var B=G.attr("title");var E=G.data("caption");var J=$("#plan").data("category");var I=G.data("planprice");var C=G.data("madori");var F=G.data("landarea");var A=G.data("buildarea");if(H=="1"){if(typeof(E)=="undefined"){E=""}}else{if(typeof(E)=="undefined"||E==""){E="-"}}if(D===""){B=(b==1)?"":"　";E=""}v.html(B);z.html(B);l.html(E);s.html(J);n.html(I);a.html(C);d.html(F);f.html(A)}q.find(".content-arrow-l a").on("click",function(C){var A=q.find(".swiper-content .swiper-slide.swiper-slide-active").prev("figure").length;var B=q.find(".swiper-content .swiper-slide.swiper-slide-active.estate").length;C.preventDefault();e.swipePrev();if(q.find(".photo-slider-thumb #photo-slider-thumb-list").length&&!A&&!B){e.swipeTo(k-1)}});q.find(".content-arrow-r a").on("click",function(B){var C=q.find(".swiper-content .swiper-slide.swiper-slide-active").next("figure").length;var A=q.find(".swiper-content .swiper-slide.swiper-slide-active.estate").length;B.preventDefault();e.swipeNext();if(q.find(".photo-slider-thumb #photo-slider-thumb-list").length&&!C&&!A){e.swipeTo(0)}});q.find(".swiper-slide.notphoto").on("click",function(){return false});q.find(".swiper-slide a").on("click",function(){if($(this).parents("figure").hasClass("notphoto")){return false}var A=$(this).attr("href");var C=$(this).attr("logbukken");var D=$(this).attr("logparam");if((A!="")){B(C,D);return}function B(E,F){$.ajax({type:"POST",url:"/smt/sendimagelog",data:{BUKKEN:E,PARAM:F},dataType:"html",success:function(){},error:function(){}})}return false});$(window).load(function(){$(".photo-slider .swiper-content .inner a").addClass("loupe")})};var c049q_initPhotoSwipeFromDOM=function(c){var k=function(o){var v=o.childNodes,l=v.length,r=[],q,s,u,t;for(var p=0;p<l;p++){q=v[p];if(q.nodeType!==1){continue}if(!q.classList.contains("notphoto")){s=q.children[0];u=s.getAttribute("data-size").split("x");t={src:s.getAttribute("href"),w:parseInt(u[0],10),h:parseInt(u[1],10)};if(q.children.length>1){t.title=q.children[1].innerHTML}if(s.children.length>0){t.msrc=s.children[0].getAttribute("src")}t.el=q;r.push(t)}}return r};var d=function d(l,i){return l&&(i(l)?l:d(l.parentNode,i))};var h=function(s){s=s||window.event;s.preventDefault?s.preventDefault():s.returnValue=false;var p=s.target||s.srcElement;var v=d(p,function(i){return(i.tagName&&i.tagName.toUpperCase()==="FIGURE")});if(!v){return}var t=v.parentNode,u=v.parentNode.childNodes,q=u.length,l=0,r;for(var o=0;o<q;o++){if(u[o].nodeType!==1){continue}if(u[o]===v){r=l;break}l++}if(r>=0){g(r,t,true)}return false};var j=function(){var p=window.location.hash.substring(1),r={};if(p.length<5){return r}var o=p.split("&");for(var l=0;l<o.length;l++){if(!o[l]){continue}var q=o[l].split("=");if(q.length<2){continue}r[q[0]]=q[1]}if(r.gid){r.gid=parseInt(r.gid,10)}if(!r.hasOwnProperty("pid")){return r}r.pid=parseInt(r.pid,10);return r};var g=function(r,s,u){galleryMoveFlg=false;var q=document.querySelectorAll(".pswp")[0],A,z,t;t=k(s);z={index:r,fullscreenEl:false,shareEl:false,galleryUID:s.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(B){if(t[B]&&t[B].el&&t[B].el.getElementsByTagName("img")){var D=t[B].el.getElementsByTagName("img")[0],C=window.pageYOffset||document.documentElement.scrollTop;if($(".pswp__top-bar").length){C=C+$(".pswp__top-bar").outerHeight(true)}rect=D.getBoundingClientRect();return{x:rect.left,y:rect.top+C,w:rect.width}}else{return{x:0,y:0,w:0}}},};if(u){z.showAnimationDuration=0;z.hideAnimationDuration=0;$(".pinchout").css("display","block");setTimeout(function(){$(".pinchout").fadeOut("slow")},3000)}A=new PhotoSwipe(q,PhotoSwipeUI_Default,t,z);A.listen("imageLoadComplete",function(C,E){var D=E.w;var F=E.h;var B=$(".pswp").innerHeight();if($(".pswp__top-bar").length){B=B-$(".pswp__top-bar").outerHeight(true)}if($(".pswp .btn-basic.btn-orange.btn-wide").length){B=B-$(".pswp .btn-basic.btn-orange.btn-wide").outerHeight(true)}if(F>B){E.h=B;E.w=D*B/F;A.invalidateCurrItems();A.updateSize(true)}});A.init();A.listen("close",function(){var E=true;var D=navigator.userAgent.toLowerCase();if(D.indexOf("android")>0){var C=D.substr(D.indexOf("android")+8,3);if(parseFloat(C)<2.4){E=false}}else{if(/iphone/.test(D)){D.match(/iphone os (\w+){1,3}/g);var B=(RegExp.$1.replace(/_/g,"")+"00").slice(0,3);if(B<500){E=false}}}if(E){$("#contact-fixed").show()}});A.listen("beforeChange",function(B){galleryMoveFlg=(B!=0)});A.listen("afterChange",function(){if(galleryMoveFlg){galleryMoveFlg=false;var B=A.getCurrentIndex();$el=getGalleryEl(A.items,B);if($el.length){$a=$el.find("a");v=$a.attr("href");l=$a.attr("subcategory-name");x=$a.attr("caption-name");eventLogOutput(v,l,x,o,i,p)}}});$el=getGalleryEl(t,r);if($el.length){$a=$el.find("a");var v=$a.attr("href");var l=$a.attr("subcategory-name");var x=$a.attr("caption-name");var o=navigator.userAgent;var i=$("#BUKKEN").val();var p=$("#eventLogOutput").data("shumoku");eventLogOutput(v,l,x,o,i,p)}var w=$(".swiper-container.swiper-content .swiper-slide").length;var y=$(".swiper-container.swiper-content .notphoto").length;if(w-y==1){$(".pswp__counter").show()}};var n=document.querySelectorAll(c);var m=document.getElementsByClassName(c.replace(".",""));var b=function(p){for(var l=0;l<p.length;l++){var o=parseInt(p[l].style.width)+1;p[l].style.width=o+"px"}};b(m);window.addEventListener("resize",function(i){b(m)});for(var f=0,e=n.length;f<e;f++){n[f].setAttribute("data-pswp-uid",f+1);n[f].onclick=h}var a=j();if(a.pid>0&&a.gid>0){g(a.pid-1,n[a.gid-1],true)}};function getGalleryEl(a,b){$layouttype=$('input[name="layoutType"]');if($layouttype.length&&"1"==$layouttype.val()){return $(".gallery-swiper a").eq(b).parent()}else{return $(a[b].el)}}window.onload=function(){c049q_initPhotoSwipeFromDOM(".gallery-swiper");c049q_initPhotoSwipeFromDOM(".detail-photo-list")};function cutHostnameAndSearchStrFromUrl(a){var b=document.createElement("a");b.href=a;return b.pathname}function thumbListSlide(){var c=$(".swiper-slide.active-nav.inner.swiper-slide-active").find("a").attr("href");var f=cutHostnameAndSearchStrFromUrl(c);var e=$(".photo-slider-thumb-list__item.is-show");$(".photo-slider-thumb-list__item").removeClass("is-show");var b=$(".photo-slider-thumb-list__item[style*='"+f+"']");b.addClass("is-show");var a=$(".photo-slider-thumb-list__item").index(b);if((e.length&&$(".photo-slider-thumb-list__item").index(e)==a)||a<0){}else{var g=a*95;$(".photo-slider-thumb").animate({scrollLeft:g,},{duration:"fast",easing:"swing",})}var d=$(".swiper-slide.active-nav.inner.swiper-slide-active").find("a").attr("title");$(".swiper-slide__title").text(d)}$(window).on("load",function(){var c=$(".swiper-slide.active-nav.inner").length-$(".swiper-slide.active-nav.inner.notphoto").length;$(".detail-header__num").html(c+"枚");var l=$(".detail-photo-list");for(var g=0;g<c;g++){var b=$(".swiper-wrapper.gallery-swiper").children("figure").eq(g).find("a").attr("href");var f=$(".swiper-wrapper.gallery-swiper").children("figure").eq(g).find("a").data("size");var j=$(".swiper-wrapper.gallery-swiper").children("figure").eq(g).find("figcaption").clone();var h=$("<figure class=detail-photo-list__item></figure>");var k=$("<a class='detail-photo__itemImage'href='"+b+"'></a>");k.css("background-image","url("+b+")");var d=$("<img></img>");d.attr("src",b);k.attr("data-size",f);k.append(d);h.append(k);h.append(j);l.append(h)}var e=$(".detail-photo-list__item").outerWidth();$(".detail-photo-list__item").each(function(a,i){$(this).css("height",e+"px")})});$(document).on("click",".detail-photo-list__item",function(a){a.preventDefault();$("body").removeClass("not-scroll");$(".detail-photo-listArea").removeClass("is-open").trigger("closeEvent")});$(".detail-photo-listArea").on("openEvent",function(){if($("#contact-fixed").length){$("#contact-fixed").hide()}});$(".detail-photo-listArea").on("closeEvent",function(){if($("#contact-fixed").length){$("#contact-fixed").show()}});