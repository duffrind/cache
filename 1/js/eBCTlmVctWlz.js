$(function(){$(window).on("load",function(){var l=$(".swiper-slide.active-nav.inner").length-$(".swiper-slide.active-nav.inner.notphoto").length;var e=$('.swiper-slide.active-nav.inner img[src$="nophoto.gif"]').length+$('.swiper-slide.active-nav.inner img[src$="pic_now_printing.gif"]').length+$('.swiper-slide.active-nav.inner img[src$="pic_now_printing_nolink.gif"]').length;if(e>1){e=1}$("#c049q_photo-slider").find(".photo-slider-num .photo-slider-num-total").html(l);$("#c049q_photo-slider").find(".photo-slider-num .photo-slider-num-now").html(1);$(".photo-slider-thumb").show();var g=$("#photo-slider-thumb-list");var k=l*95;g.css("width",k+"px");for(var f=0;f<l;f++){if(l>1||e!=1){var m=$(".gallery-swiper").children("figure").eq(f).find("a").attr("href")}else{var m=$(".gallery-swiper").children("figure").eq(f).find("img").attr("src")}var j=$("<li class=photo-slider-thumb-list__item></li>");j.css("background-image","url("+m+")");g.append(j);if(f==0){j.addClass("is-show")}}var h=$(".gallery-swiper").find("figure").eq(0).find("a").attr("title");$(".swiper-slide__title").text(h)});var d=0;var b=null;var a=null;var c=null;$("#photo-slider-thumb-list").on("click",".photo-slider-thumb-list__item",function(g){var m=g.target;if(d==0&&m!==b){d=1;b=m;$(".photo-slider-thumb-list__item").removeClass("is-show");$(this).addClass("is-show");var n=$(this).index();var k=n*95;$(".photo-slider-thumb").animate({scrollLeft:k},"swing");var i=$(this).css("background-image").replace(/^url\(["']?/,"").replace(/["']?\)$/,"");$(".swiper-wrapper figure").each(function(){$(this).removeClass("is-now swiper-slide-visible swiper-slide-active");var s=$(this).find("a").attr("href");if(cutHostnameFromUrl(i)==cutHostnameFromUrl(s)){$(this).addClass("is-now swiper-slide-visible swiper-slide-active");var r=$(this).index();$(".photo-slider-num-now").html(r+1);var t=$(this).outerWidth()*r;$(".swiper-wrapper").css("left",-t+"px");if(typeof contentSwiper!=="undefined"){contentSwiper.swipeTo(r);contentSwiper.activeIndex=r;contentSwiper.activeLoopIndex=r;contentSwiper.previousIndex=(r==0)?0:r-1}}});var l=$(".swiper-slide.is-now").find("a").attr("title");$(".swiper-slide__title").text(l);if(!$(".swiper-slide-visible.swiper-slide-active").hasClass("notphoto")){var o=$(".swiper-slide.active-nav.inner.swiper-slide-visible.swiper-slide-active");var p=o.find("a").attr("href");var f=o.find("a").attr("title");var q=o.find("a").attr("caption-name");var h=navigator.userAgent;var e=$("#BUKKEN").val();var j=$("#eventLogOutput").data("shumoku");c=p;if(c!==a){a=c;eventLogOutput(p,f,q,h,e,j)}}setTimeout(function(){d=0},350)}});$(".detail-photo-list-header__button--close").on("click",function(){$(".detail-photo-listArea").removeClass("is-open").trigger("closeEvent");$("body.not-scroll").removeClass("not-scroll")});$(".slider__favBtn").on("click",function(){var e=parseInt($(this).attr("favoritedcnt"),10);sliderFavBtnClick(e,true);topFavBtnClick(e,false);mailTorkBtnUpdate($(".slider__favBtn").hasClass("is-regist"))});$(".btn-grada.favBtn").on("click",function(){var e=parseInt($(this).attr("favoritedcnt"),10);topFavBtnClick(e,true);sliderFavBtnClick(e,false);mailTorkBtnUpdate($(".btn-grada.favBtn").find(".icon-heart").hasClass("active"))});$(document).on("psl_exam_regist_complete",function(e,f){})});var cutHostnameFromUrl=function(a){var b=document.createElement("a");b.href=a;return b.pathname+b.search};var sliderFavBtnClick=function(b,a){var c=$(".slider__favBtn");c.toggleClass("is-regist");if(a){addSingleFavorite(c,"form")}else{c.toggleClass("is-checked")}if(c.hasClass("is-regist")){c.find(".color-red").text(b+1);c.find("p").text("人");c.attr("favoritedcnt",b+1);if(typeof c.attr("data-event")!=="undefined"){c.attr({"data-event":"","data-category":"","data-action":"","data-label":""})}}else{c.find(".color-red").text("");c.find("p").text("追加");c.attr("favoritedcnt",b-1);if(typeof c.attr("data-event")!=="undefined"){c.attr({"data-event":"clicktracking","data-category":"お気に入り","data-action":"登録","data-label":"お気に入り_登録_上部"})}}};var topFavBtnClick=function(b,a){var c=$(".btn-grada.favBtn");c.find(".icon-heart").toggleClass("active");if(a){addSingleFavorite(c,"form")}else{c.toggleClass("is-checked")}if(c.find(".icon-heart").hasClass("active")){c.find(".text").text("追加済み");if(b>0){c.find(".color-red").text(b+1)}else{c.find(".text_start").text("（");c.find(".color-red").text("1");c.find(".text_end").text("人が登録中）")}c.attr("favoritedcnt",b+1);c.attr({"data-event":"","data-category":"","data-action":"","data-label":""})}else{c.find(".text").text("お気に入り登録する");if(b>1){c.find(".color-red").text(b-1)}else{c.find(".text_start").text("");c.find(".color-red").text("");c.find(".text_end").text("")}c.attr("favoritedcnt",b-1);c.attr({"data-event":"clicktracking","data-category":"お気に入り","data-action":"登録",});c.each(function(d,e){$(e).attr("data-label","");if(""!=$(e).attr("backup")){$(e).attr("data-label",$(e).attr("backup"))}})}};var mailTorkBtnUpdate=function(a){if(a){$("#favinfo > a").each(function(c,d){var b=$(d).attr("mailpush-label");$(d).attr({"data-category":"メール登録","data-action":"遷移","data-label":b})});$("#favinfo > a").attr("data-saved",true)}else{$("#favinfo > a").each(function(c,d){var b=$(d).attr("mailpush-label");$(d).attr({"data-category":"お気に入り","data-action":"登録かつ遷移","data-label":b})});$("#favinfo > a").attr("data-saved",false)}};